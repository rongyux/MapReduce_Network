nohup: 忽略输入
++ uname -n
+ machine_name=cp01-ztc-md.epc.baidu.com
+ user_name=rongyu
+ HADOOP_KHAN=/home/users/wuxiaoxu/hadoop/hadoop-client-khan/hadoop
+ HADOOP_MLAN=/root/rongyu01/hadoop-client/hadoop-client-nmg-mulan/hadoop
+ HADOOP_TH=/root/rongyu01/hadoop-client/hadoop-client-nmg-mulan/hadoop
+ SUFFIX_KHAN=hdfs://nmg01-khan-hdfs.dmop.baidu.com:54310
+ SUFFIX_MLAN=hdfs://nmg01-mulan-hdfs.dmop.baidu.com:54310
+ date=20170624
+ data_input='hdfs://nmg01-mulan-hdfs.dmop.baidu.com:54310/app/ecom/fcr-important/shitu-log-wise/222_223/20170624/*/*'
+ data_output=hdfs://nmg01-mulan-hdfs.dmop.baidu.com:54310/app/ecom/fcr-model/rongyu01/tmp/20170624
+ PRIORITY=NORMAL
+ main
+ process_log
+ /root/rongyu01/hadoop-client/hadoop-client-nmg-mulan/hadoop/bin/hadoop streaming -D stream.num.map.output.key.fields=2 -D mapred.job.map.capacity=2000 -D mapred.job.reduce.capacity=10000 -D mapred.reduce.tasks=3000 -D mapred.map.tasks=1000 -D mapred.map.over.capacity.allowed=true -D mapred.reduce.over.capacity.allowed=true -D mapred.job.name=rongyu/ztc_trip_revised/ -D mapred.job.priority=NORMAL -D abaci.job.reduce.child.memory.mb=20000 -D stream.memory.limit=20000 -D hadoop.hce.memory.limit=20000 -jobconf abaci.is.dag.job=true -jobconf abaci.dag.vertex.num=3 -jobconf abaci.dag.next.vertex.list.0=1 -jobconf abaci.dag.next.vertex.list.1=2 -jobconf mapred.job.map.capacity.0=500 -jobconf 'stream.map.streamprocessor.0=app/bin/python2.7 mapper.py' -jobconf 'stream.reduce.streamprocessor.1=app/bin/python2.7 reducer.py' -jobconf 'stream.reduce.streamprocessor.2=app/bin/python2.7 reducer2.py' -jobconf stream.num.map.output.key.fields=2 -jobconf mapred.map.tasks=500 -jobconf stream.num.reduce.output.key.fields=2 -jobconf stream.memory.limit=1000 -jobconf mapred.job.map.capacity=200 -jobconf mapred.job.reduce.capacity=10000 -jobconf mapred.job.name=cpm_bid_relation -jobconf mapred.reduce.tasks=500 -partitioner org.apache.hadoop.mapred.lib.KeyFieldBasedPartitioner -jobconf num.key.fields.for.partition=1 -input 'hdfs://nmg01-mulan-hdfs.dmop.baidu.com:54310/app/ecom/fcr-important/shitu-log-wise/222_223/20170624/*/*' -output hdfs://nmg01-mulan-hdfs.dmop.baidu.com:54310/app/ecom/fcr-model/rongyu01/tmp/20170624 -mapper cat -reducer cat -file mapper.py -file reducer.py -file reducer2.py -cacheArchive /app/ecom/fcr-model/rongyu01/public/python2.7.tgz#app
17/07/03 15:46:33 WARN streaming.StreamJob: -cacheArchive option is deprecated, please use -archives instead.
17/07/03 15:46:33 WARN streaming.StreamJob: -jobconf option is deprecated, please use -D instead.
packageJobJar: [mapper.py, reducer.py, reducer2.py] [/root/rongyu01/hadoop-client/hadoop-client-nmg-mulan/hadoop/contrib/streaming/hadoop-2-streaming.jar] /tmp/streamjob2138548762685374724.jar tmpDir=null
17/07/03 15:46:35 INFO mapred.JobClient: class org.apache.hadoop.security.UnixUserGroupInformation
17/07/03 15:46:35 INFO mapred.JobClient: class org.apache.hadoop.security.UnixUserGroupInformation
17/07/03 15:46:36 INFO hdfs.FMSClient: Write 22518000806260621 in pipeline 10.73.174.53:7001, 10.73.52.27:7001, 10.73.68.11:7001, 10.73.178.52:7001, 10.73.62.18:7001, 10.73.35.58:7001, 10.75.53.26:7001, 10.75.61.44:7001, 10.75.79.11:7001, 10.75.71.25:7001
17/07/03 15:46:37 INFO util.NativeCodeLoader: Loaded the native-hadoop library
17/07/03 15:46:37 INFO compress.LzoCodec: Successfully loaded & initialized native-lzo library
17/07/03 15:46:37 INFO compress.LzmaCodec: Successfully loaded & initialized native-lzma library
17/07/03 15:46:37 INFO compress.QuickLzCodec: Successfully loaded & initialized native-quicklz library
17/07/03 15:46:37 INFO mapred.FileInputFormat: getInputPaths: dirs: hdfs://nmg01-mulan-hdfs.dmop.baidu.com:54310/app/ecom/fcr-important/shitu-log-wise/222_223/20170624/*/*
17/07/03 15:47:04 INFO mapred.FileInputFormat: Total input paths to process : 4848
17/07/03 15:47:04 WARN mapred.FileInputFormat: Split size is optimized by default, you can set 'abaci.split.optimize.enable=false' to skip it
17/07/03 15:50:28 INFO hdfs.FMSClient: Write 27866025363172427 in pipeline 10.73.91.48:7001, 10.73.83.42:7001, 10.73.18.27:7001
17/07/03 15:50:31 INFO mapred.JobClient: splits size : 87756
17/07/03 15:50:31 INFO hdfs.FMSClient: Write 30680774797698550 in pipeline 10.75.43.53:7001, 10.73.71.22:7001, 10.73.97.40:7001
17/07/03 15:50:31 INFO split.SplitUtils: create hdfs://nmg01-mulan-hdfs.dmop.baidu.com:54310/app/dc/deva/system/mapred/job_20170531134023_669748/split.done
17/07/03 15:50:32 INFO hdfs.FMSClient: Write 10696051784661949 in pipeline 10.75.40.27:7001, 10.73.240.41:7001, 10.73.110.39:7001
17/07/03 15:50:32 INFO mapred.JobClient: Running job: job_20170531134023_669748
17/07/03 15:50:32 INFO mapred.JobClient: To kill this job, run:
17/07/03 15:50:32 INFO mapred.JobClient: /root/rongyu01/hadoop-client/hadoop-client-nmg-mulan/hadoop/bin/../bin/hadoop job -Dmapred.job.tracker=nmg01-mulan-job.dmop.baidu.com:54311 -kill job_20170531134023_669748
17/07/03 15:50:32 INFO mapred.JobClient: Tracking URL: http://nmg01-mulan-mapred11.nmg01.baidu.com:8067/jobproxy.jsp?jobid=job_20170531134023_669748
17/07/03 15:50:59 INFO mapred.JobClient: Total split num: 87756
17/07/03 15:50:59 INFO mapred.JobClient: Total split size: 25852614 (bytes)
17/07/03 15:50:59 INFO mapred.JobClient: Total split time: 234082 (ms)
17/07/03 15:51:00 INFO mapred.JobClient:  map 0% reduce 0%
17/07/03 16:22:40 INFO mapred.JobClient:  map 1% reduce 0%
17/07/03 16:22:59 INFO mapred.JobClient:  map 2% reduce 0%
17/07/03 16:23:29 INFO mapred.JobClient:  map 3% reduce 0%
17/07/03 16:23:50 INFO mapred.JobClient:  map 4% reduce 0%
17/07/03 16:24:10 INFO mapred.JobClient:  map 5% reduce 0%
17/07/03 16:24:30 INFO mapred.JobClient:  map 6% reduce 0%
17/07/03 16:24:39 INFO mapred.JobClient:  map 7% reduce 0%
17/07/03 16:24:50 INFO mapred.JobClient:  map 8% reduce 0%
17/07/03 16:25:09 INFO mapred.JobClient:  map 9% reduce 0%
17/07/03 16:25:30 INFO mapred.JobClient:  map 10% reduce 0%
17/07/03 16:25:50 INFO mapred.JobClient:  map 11% reduce 0%
17/07/03 16:26:21 INFO mapred.JobClient:  map 12% reduce 0%
17/07/03 16:26:41 INFO mapred.JobClient:  map 13% reduce 0%
17/07/03 16:27:11 INFO mapred.JobClient:  map 14% reduce 0%
17/07/03 16:27:51 INFO mapred.JobClient:  map 15% reduce 0%
17/07/03 16:28:12 INFO mapred.JobClient:  map 16% reduce 0%
17/07/03 16:28:42 INFO mapred.JobClient:  map 17% reduce 0%
17/07/03 16:29:02 INFO mapred.JobClient:  map 18% reduce 0%
17/07/03 16:29:22 INFO mapred.JobClient:  map 19% reduce 0%
17/07/03 16:29:32 INFO mapred.JobClient:  map 20% reduce 0%
17/07/03 16:30:12 INFO mapred.JobClient:  map 21% reduce 0%
17/07/03 16:30:22 INFO mapred.JobClient:  map 22% reduce 0%
17/07/03 16:30:42 INFO mapred.JobClient:  map 23% reduce 0%
17/07/03 16:31:13 INFO mapred.JobClient:  map 24% reduce 0%
17/07/03 16:31:32 INFO mapred.JobClient:  map 25% reduce 0%
17/07/03 16:31:52 INFO mapred.JobClient:  map 26% reduce 0%
17/07/03 16:32:13 INFO mapred.JobClient:  map 27% reduce 0%
17/07/03 16:32:43 INFO mapred.JobClient:  map 28% reduce 0%
17/07/03 16:33:03 INFO mapred.JobClient:  map 29% reduce 0%
17/07/03 16:33:33 INFO mapred.JobClient:  map 30% reduce 0%
17/07/03 16:33:53 INFO mapred.JobClient:  map 31% reduce 0%
17/07/03 16:34:33 INFO mapred.JobClient:  map 32% reduce 0%
17/07/03 16:34:53 INFO mapred.JobClient:  map 33% reduce 0%
17/07/03 16:35:33 INFO mapred.JobClient:  map 34% reduce 0%
17/07/03 16:36:13 INFO mapred.JobClient:  map 35% reduce 0%
17/07/03 16:37:04 INFO mapred.JobClient:  map 36% reduce 0%
17/07/03 16:38:14 INFO mapred.JobClient:  map 37% reduce 0%
17/07/03 16:39:34 INFO mapred.JobClient:  map 38% reduce 0%
17/07/03 16:42:56 INFO mapred.JobClient:  map 39% reduce 0%
17/07/03 16:43:26 INFO mapred.JobClient:  map 40% reduce 0%
17/07/03 16:43:45 INFO mapred.JobClient:  map 41% reduce 0%
17/07/03 16:44:06 INFO mapred.JobClient:  map 42% reduce 0%
17/07/03 16:44:26 INFO mapred.JobClient:  map 43% reduce 0%
17/07/03 16:44:46 INFO mapred.JobClient:  map 44% reduce 0%
17/07/03 16:44:56 INFO mapred.JobClient:  map 45% reduce 0%
17/07/03 16:45:06 INFO mapred.JobClient:  map 46% reduce 0%
17/07/03 16:45:16 INFO mapred.JobClient:  map 47% reduce 0%
17/07/03 16:45:36 INFO mapred.JobClient:  map 48% reduce 0%
17/07/03 16:45:46 INFO mapred.JobClient:  map 49% reduce 0%
17/07/03 16:46:07 INFO mapred.JobClient:  map 50% reduce 0%
17/07/03 16:46:17 INFO mapred.JobClient:  map 51% reduce 0%
17/07/03 16:46:37 INFO mapred.JobClient:  map 52% reduce 0%
17/07/03 16:46:47 INFO mapred.JobClient:  map 53% reduce 0%
17/07/03 16:47:07 INFO mapred.JobClient:  map 54% reduce 0%
17/07/03 16:47:17 INFO mapred.JobClient:  map 55% reduce 0%
17/07/03 16:47:27 INFO mapred.JobClient:  map 56% reduce 0%
17/07/03 16:47:37 INFO mapred.JobClient:  map 57% reduce 0%
17/07/03 16:47:57 INFO mapred.JobClient:  map 58% reduce 0%
17/07/03 16:48:18 INFO mapred.JobClient:  map 59% reduce 0%
17/07/03 16:48:37 INFO mapred.JobClient:  map 60% reduce 0%
17/07/03 16:48:57 INFO mapred.JobClient:  map 61% reduce 0%
17/07/03 16:49:18 INFO mapred.JobClient:  map 62% reduce 0%
17/07/03 16:49:37 INFO mapred.JobClient:  map 63% reduce 0%
17/07/03 16:49:58 INFO mapred.JobClient:  map 64% reduce 0%
17/07/03 16:50:09 INFO mapred.JobClient:  map 65% reduce 0%
17/07/03 16:50:29 INFO mapred.JobClient:  map 66% reduce 0%
17/07/03 16:50:50 INFO mapred.JobClient:  map 67% reduce 0%
17/07/03 16:51:10 INFO mapred.JobClient:  map 68% reduce 0%
17/07/03 16:51:19 INFO mapred.JobClient:  map 69% reduce 0%
17/07/03 16:51:40 INFO mapred.JobClient:  map 70% reduce 0%
17/07/03 16:52:00 INFO mapred.JobClient:  map 71% reduce 0%
17/07/03 16:52:10 INFO mapred.JobClient:  map 72% reduce 0%
17/07/03 16:52:31 INFO mapred.JobClient:  map 73% reduce 0%
17/07/03 16:52:50 INFO mapred.JobClient:  map 74% reduce 0%
17/07/03 16:53:11 INFO mapred.JobClient:  map 75% reduce 0%
17/07/03 16:53:21 INFO mapred.JobClient:  map 76% reduce 0%
17/07/03 16:53:41 INFO mapred.JobClient:  map 77% reduce 0%
17/07/03 16:54:00 INFO mapred.JobClient:  map 78% reduce 0%
17/07/03 16:54:12 INFO mapred.JobClient:  map 79% reduce 0%
17/07/03 16:54:31 INFO mapred.JobClient:  map 80% reduce 0%
17/07/03 16:54:51 INFO mapred.JobClient:  map 81% reduce 0%
17/07/03 16:55:01 INFO mapred.JobClient:  map 82% reduce 0%
17/07/03 16:55:22 INFO mapred.JobClient:  map 83% reduce 0%
17/07/03 16:55:42 INFO mapred.JobClient:  map 84% reduce 0%
17/07/03 16:55:52 INFO mapred.JobClient:  map 85% reduce 0%
17/07/03 16:56:13 INFO mapred.JobClient:  map 86% reduce 0%
17/07/03 16:56:32 INFO mapred.JobClient:  map 87% reduce 0%
17/07/03 16:56:53 INFO mapred.JobClient:  map 88% reduce 0%
17/07/03 16:57:03 INFO mapred.JobClient:  map 89% reduce 0%
17/07/03 16:57:24 INFO mapred.JobClient:  map 90% reduce 0%
17/07/03 16:57:43 INFO mapred.JobClient:  map 91% reduce 0%
17/07/03 16:58:03 INFO mapred.JobClient:  map 92% reduce 0%
17/07/03 16:58:24 INFO mapred.JobClient:  map 93% reduce 0%
17/07/03 16:58:44 INFO mapred.JobClient:  map 94% reduce 0%
17/07/03 16:59:04 INFO mapred.JobClient:  map 95% reduce 0%
17/07/03 16:59:24 INFO mapred.JobClient:  map 96% reduce 0%
17/07/03 16:59:45 INFO mapred.JobClient:  map 97% reduce 0%
17/07/03 16:59:54 INFO mapred.JobClient:  map 98% reduce 0%
17/07/03 17:00:05 INFO mapred.JobClient:  map 99% reduce 0%
17/07/03 17:01:37 INFO mapred.JobClient:  map 100% reduce 0%
17/07/03 18:13:44 INFO mapred.JobClient:  map 100% reduce 8%
17/07/03 18:13:54 INFO mapred.JobClient:  map 100% reduce 23%
17/07/03 18:14:05 INFO mapred.JobClient:  map 100% reduce 31%
17/07/03 18:14:14 INFO mapred.JobClient:  map 100% reduce 38%
17/07/03 18:14:25 INFO mapred.JobClient:  map 100% reduce 41%
17/07/03 18:14:35 INFO mapred.JobClient:  map 100% reduce 47%
17/07/03 18:14:44 INFO mapred.JobClient:  map 100% reduce 48%
17/07/03 18:14:55 INFO mapred.JobClient:  map 100% reduce 49%
17/07/03 18:16:26 INFO mapred.JobClient:  map 100% reduce 50%
17/07/03 18:17:07 INFO mapred.JobClient:  map 100% reduce 58%
17/07/03 18:17:17 INFO mapred.JobClient:  map 100% reduce 73%
17/07/03 18:17:26 INFO mapred.JobClient:  map 100% reduce 93%
17/07/03 18:17:37 INFO mapred.JobClient:  map 100% reduce 98%
17/07/03 18:17:47 INFO mapred.JobClient:  map 100% reduce 99%
17/07/03 18:18:18 INFO mapred.JobClient: Updating completed job! Ignoring ...
17/07/03 18:18:18 INFO mapred.JobClient: Updating completed job! Ignoring ...
17/07/03 18:18:18 INFO mapred.JobClient: Job complete: job_20170531134023_669748
17/07/03 18:18:18 INFO streaming.StreamJob: Output: hdfs://nmg01-mulan-hdfs.dmop.baidu.com:54310/app/ecom/fcr-model/rongyu01/tmp/20170624
